"use strict";class e{lastHash=__webpack_hash__;moduleHot;constructor(e){this.moduleHot=e}moduleHotCheck=async()=>{if(!this.moduleHot)throw null;let e=await this.moduleHot.check(!0);if(!e)throw null;if(!this.webpackHashCheck()){const s=await this.moduleHotCheck();e=[...e,...s]}return(e=>{const s={};return e.forEach((function(e){s[e]=null})),Object.keys(s)})(e)};webpackHashCheck=e=>(this.lastHash=e||this.lastHash,this.lastHash===__webpack_hash__);check=async()=>{try{return await this.moduleHotCheck()}catch(e){return null}};hotEnable=()=>!!this.moduleHot}class s{moduleCheck;constructor(e){this.moduleCheck=e}getEvent=async e=>{const s=await this.processEvent(e);return JSON.parse(JSON.stringify(s))};processEvent=async e=>{const s={message:"unknown",refresh:!1,state:e.state,action:e.action,modules:[]};if("refresh"===e.action)return s.message="Remote refresh",s.refresh=!0,s;if(!e.state)return s.message="Not valid state",s.refresh=!1,s;const t=e.state.client;if(this.moduleCheck.webpackHashCheck(t.hash))return s.message="Already update",s.refresh=!1,s;if(t.errors.length>0)return s.message="Build with error",s.refresh=!1,s;if(!this.moduleCheck.hotEnable())return s.message="Hot module reload disable",s.refresh=!this.moduleCheck.webpackHashCheck(t.hash),s;const n=await this.moduleCheck.check();return n?(s.message="Modules updated",s.refresh=!1,s.modules=n,s):(s.refresh=!0,s.message="Update failed",s)}}class t{wasConnected=!1;ws;reconnected=!0;url;timeout;timer;connectCallbacks=[];reConnectCallbacks=[];messageCallbacks=[];closeCallbacks=[];constructor(e,s){this.url=e,this.timeout=s,this.connect()}connect(){const e=new WebSocket(this.url);e.onopen=()=>{(this.wasConnected?this.reConnectCallbacks:this.connectCallbacks).forEach((s=>{s(e)})),this.wasConnected=!0},e.onmessage=e=>{this.messageCallbacks.forEach((s=>{s(e.data.toString())}))},e.onclose=()=>{this.reconnected&&(this.closeCallbacks.forEach((e=>{e()})),this.timer=setTimeout((()=>{this.connect()}),this.timeout))},e.onerror=()=>{e.close()},this.ws=e}close(){this.reconnected=!1,this.timer&&clearTimeout(this.timer),this.ws&&this.ws.close()}onConnect(e){return this.connectCallbacks.push(e),this}onReConnect(e){return this.reConnectCallbacks.push(e),this}onMessage(e){return this.messageCallbacks.push(e),this}onClose(e){return this.closeCallbacks.push(e),this}}var n;(({refresh:n,sendEvent:c})=>{const o=new e(module.hot),a=new s(o);new t("ws://"+location.host+"/__webpack_hmr_sever__",5e3).onConnect((function(e){e.send("init")})).onReConnect((function(e){e.send("check")})).onClose((()=>{c({message:"Disconect",action:"disconect",refresh:!1})})).onMessage((function(e){const s=JSON.parse(e);a.getEvent(s).then((e=>{c(e),e.refresh&&n()}))}))})({sendEvent:(n="__webpack_hmr_sever__",e=>{const s=new CustomEvent(n,{cancelable:!0,bubbles:!0,detail:e});document.dispatchEvent(s)}),refresh:()=>{setTimeout((()=>{window.location.reload()}),1e3)}});
