"use strict";const e=function(e){const s=e.message,t=e.stack;return t?t.indexOf(s)<0?s+"\n"+t:t:s};class s{message;pageReload;constructor(e){this.message=e.message,this.pageReload=e.pageReload}}class t{webpackHashCheck=(()=>{let e=__webpack_hash__;return s=>(e=s||e,e===__webpack_hash__)})();sendEvent;pageReload;constructor(e){this.sendEvent=e.sendEvent,this.pageReload=e.pageReload}async moduleHotCheck(){let e=await module.hot.check(!0);if(!e)throw new s({message:"Cannot find update",pageReload:!0});if(!this.webpackHashCheck()){const s=await this.moduleHotCheck();e=[...e,...s]}return(e=>{const s={};return e.forEach((function(e){s[e]=null})),Object.keys(s)})(e)}async check(s,t){try{const e=await this.moduleHotCheck();this.sendEvent({message:"Modules updated",serverAction:t,updatedModules:e,moduleData:s})}catch(a){if(a.pageReload)return this.sendEvent({message:"Cannot find update. Page will be full reload",serverAction:t,moduleData:s}),void this.pageReload();const n=module?.hot?.status()||"";if(["abort","fail"].indexOf(n)>=0)return this.sendEvent({message:"Cannot apply update. Page will be full reload",serverAction:t,moduleData:s}),void this.pageReload();this.sendEvent({message:"Update failed",serverAction:t,stack:e(a),moduleData:s})}}emit(e,s){if(!module.hot)return this.sendEvent({message:"Hot Module Replacement is disabled. Page will be full reload",serverAction:s,moduleData:e}),void this.pageReload();this.webpackHashCheck(e.hash)?this.sendEvent({message:"Already update",serverAction:s,moduleData:e}):this.check(e,s)}}class a{wasConnected=!1;ws;reconnected=!0;url;timeout;timer;connectCallbacks=[];reConnectCallbacks=[];messageCallbacks=[];closeCallbacks=[];constructor(e,s){this.url=e,this.timeout=s,this.connect()}connect(){const e=new WebSocket(this.url);e.onopen=()=>{(this.wasConnected?this.reConnectCallbacks:this.connectCallbacks).forEach((s=>{s(e)})),this.wasConnected=!0},e.onmessage=e=>{this.messageCallbacks.forEach((s=>{s(e.data.toString())}))},e.onclose=()=>{this.reconnected&&(this.closeCallbacks.forEach((e=>{e()})),this.timer=setTimeout((()=>{this.connect()}),this.timeout))},e.onerror=()=>{e.close()},this.ws=e}close(){this.reconnected=!1,this.timer&&clearTimeout(this.timer),this.ws&&this.ws.close()}onConnect(e){return this.connectCallbacks.push(e),this}onReConnect(e){return this.reConnectCallbacks.push(e),this}onMessage(e){return this.messageCallbacks.push(e),this}onClose(e){return this.closeCallbacks.push(e),this}}class n{sendEvent;replaceModiles;pageReload;constructor(e){this.sendEvent=e.sendEvent,this.replaceModiles=e.replaceModiles,this.pageReload=e.pageReload}emit(e){try{const s=JSON.parse(e);this.process(s)}catch(e){this.sendEvent({message:"Server message error",moduleData:null})}}process(e){if("reload"===e.action)return this.sendEvent({message:"Remote reload",serverAction:e.action,moduleData:null}),void this.pageReload();const s=e.data;null!==s?s.errors.length>0?this.sendEvent({message:"Build error",serverAction:e.action,moduleData:s}):["init","check","build"].includes(e.action)&&this.replaceModiles(s,e.action):this.sendEvent({message:"Module data is null",serverAction:e.action,moduleData:null})}}(()=>{const e=(s="__webpack_hmr_sever__",e=>{const t=new CustomEvent(s,{cancelable:!0,bubbles:!0,detail:e});document.dispatchEvent(t)});var s;const o=()=>{setTimeout((()=>{window.location.reload()}),1e3)},c=new t({pageReload:o,sendEvent:e}),l=new n({sendEvent:e,pageReload:o,replaceModiles:c.emit});new a("ws://"+location.host+"/__webpack_hmr_sever__",5e3).onConnect((e=>{e.send("init")})).onReConnect((e=>{e.send("check")})).onClose((()=>{e({message:"Server reconnect",moduleData:null})})).onMessage((e=>{l.emit(e)}))})();
